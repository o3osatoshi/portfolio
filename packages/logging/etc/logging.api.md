## API Report File for "@o3osatoshi/logging"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { Axiom } from '@axiomhq/js';
import { AxiomWithoutBatching } from '@axiomhq/js';
import { ClientOptions } from '@axiomhq/js';
import { Env } from '@o3osatoshi/toolkit';
import * as _o3osatoshi_toolkit from '@o3osatoshi/toolkit';
import { z } from 'zod';

// @public
export type Attributes = z.infer<typeof attributesSchema>;

// @public
export const attributesSchema: z.ZodRecord<z.ZodString, z.ZodOptional<z.ZodType<_o3osatoshi_toolkit.JsonValue, unknown, z.core.$ZodTypeInternals<_o3osatoshi_toolkit.JsonValue, unknown>>>>;

// @public
export type AxiomClient = Axiom | AxiomWithoutBatching;

// @public
export interface AxiomClientOptions extends ClientOptions {
    mode?: ClientMode;
}

// @public
export interface BaseLoggingOptions {
    client?: ClientOptions;
    datasets: LoggingDatasets;
    env: Env;
    minLevel?: LogLevel;
    sampleRate?: number;
    service: string;
    transport?: Transport;
}

// @public
export type ClientMode = "batch" | "immediate";

export { ClientOptions }

// @public
export function createAxiomClient(options: AxiomClientOptions): AxiomClient;

// @public
export function createAxiomTransport(options: AxiomClientOptions): Transport;

// @public
export function createLogger(options: CreateLoggerOptions): Logger;

// @public
export interface CreateLoggerOptions {
    attributes?: Attributes;
    datasets: LoggingDatasets;
    minLevel?: LogLevel | undefined;
    sampleRate?: number | undefined;
    transport: Transport;
}

// @public
export function createTraceContext(keepsake?: {
    spanId?: string | undefined;
    traceId?: string | undefined;
    traceparent?: string | undefined;
}): TraceContext;

// @public
export function formatTraceparent(context: TraceContext, flags?: string): string;

// @public
export type LogEvent = z.infer<typeof logEventSchema>;

// @public
export const logEventSchema: z.ZodObject<{
    level: z.ZodOptional<z.ZodEnum<{
        debug: "debug";
        error: "error";
        info: "info";
        warn: "warn";
    }>>;
    message: z.ZodOptional<z.ZodString>;
    timestamp: z.ZodString;
}, z.core.$catchall<z.ZodType<_o3osatoshi_toolkit.JsonValue, unknown, z.core.$ZodTypeInternals<_o3osatoshi_toolkit.JsonValue, unknown>>>>;

// @public
export interface Logger {
    child(attributes: Attributes): Logger;
    debug(message: string, attributes?: Attributes): void;
    error(message: string, attributes?: Attributes, error?: unknown): void;
    event(name: string, attributes?: Attributes): void;
    flush(): Promise<void>;
    info(message: string, attributes?: Attributes): void;
    metric(name: string, value: number, attributes?: Attributes, options?: MetricOptions): void;
    warn(message: string, attributes?: Attributes): void;
}

// @public
export interface LoggingDatasets {
    events: string;
    metrics: string;
}

// @public
export type LogLevel = z.infer<typeof logLevelSchema>;

// @public
export const logLevelSchema: z.ZodEnum<{
    debug: "debug";
    error: "error";
    info: "info";
    warn: "warn";
}>;

// @public
export interface MetricOptions {
    kind?: "counter" | "gauge" | "histogram";
    unit?: string;
}

// @public
export interface NodeLoggingOptions extends RuntimeLoggingOptions {
    flushOnExit?: boolean;
}

// @public
export function parseTraceparent(value?: string): {
    spanId: string;
    traceFlags: string;
    traceId: string;
} | undefined;

// @public
export interface RequestContext {
    clientIp?: string | undefined;
    httpMethod?: string | undefined;
    httpRoute?: string | undefined;
    requestId?: string | undefined;
    spanId?: string | undefined;
    traceId?: string | undefined;
    traceparent?: string | undefined;
    userAgent?: string | undefined;
    userId?: null | string | undefined;
}

// @public
export interface RequestLogger {
    flush: () => Promise<void>;
    logger: Logger;
    parentSpanId?: string;
    requestId?: string;
    setUserId: (userId?: null | string) => void;
    spanId: string;
    traceId: string;
}

// @public
export interface RuntimeLoggingOptions extends BaseLoggingOptions {
    flushOnEnd?: boolean;
    onError?: (error: unknown) => void;
}

// @public
export type TraceContext = {
    parentSpanId?: string;
    spanId: string;
    traceFlags?: string;
    traceId: string;
};

// @public
export interface Transport {
    emit(dataset: string, events: LogEvent | LogEvent[]): Promise<void> | void;
    flush?: () => Promise<void>;
    shutdown?: () => Promise<void>;
}

// (No @packageDocumentation comment for this package)

```
