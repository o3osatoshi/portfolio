# Changesets

Hello and welcome! This folder has been automatically generated by `@changesets/cli`, a build tool that works
with multi-package repos, or single-package repos to help you version and publish your code. You can
find the full documentation for it [in our repository](https://github.com/changesets/changesets)

We have a quick list of common questions to get you started engaging with this project in
[our documentation](https://github.com/changesets/changesets/blob/main/docs/common-questions.md)

## Basic workflow

1. Run `pnpm publish:note` whenever you have a change that should bump a published package. Select the affected packages and the appropriate semver bump, then describe the change in the generated markdown file.
2. Commit the new `.changeset/*.md` file(s) together with your code changes and open a pull request. Each changeset document is processed on the `main` branch.
3. When you are ready to cut a release, run `pnpm publish:version`. This applies the queued changesets, updates package versions and changelog entries, removes the processed files in `.changeset`, and creates a `chore(release): version packages` commit for you.
4. Publish the updated packages with `pnpm publish:packages` (runs `pnpm exec changeset publish`). Make sure you are authenticated with the npm registry beforehand.
5. After publishing, push the release commit and tags so that the repository history stays in sync with the published packages.

Tip: if you need to inspect or edit changelog output before publishing, review the generated `CHANGELOG.md` files after step 3 and adjust as needed before pushing the release commit.

> Automation note: pushing to `main` triggers `.github/workflows/release.yml`, which runs the same `pnpm publish:version` / `pnpm publish:packages` commands via `changesets/action`. Configure `NPM_TOKEN` in repository secrets to allow the workflow to publish directly; otherwise it will open a release PR.

## Writing changeset entries

- Keep one file per logical change. Group related code changes together so that a single changeset captures everything that will ship in the same release.
- Use the autogenerated filename (e.g. `calm-pandas-sing.md`) and leave it untouched unless you need to regenerate the entry.
- Always include YAML front matter at the top:
  ```
  ---
  "@o3osatoshi/ui": minor
  "@o3osatoshi/toolkit": patch
  ---
  ```
  - Quote package names.
  - Use one line per package, with the bump type `major`, `minor`, or `patch`.
  - Include only the packages that should publish; private packages and the workspaces listed in `ignore` (e.g. `@repo/application`, `@repo/domain`, `@repo/prisma`, `web`, `functions`, `storybook`) are skipped automatically.
- Write the body in markdown using short, imperative sentences. A single bullet point is usually enough:
  ```
  - add motion tokens and expose `useMotionPreset`
  ```
  - Mention breaking changes explicitly and reference PR numbers or issues when helpful (e.g. `[#123]`).
  - Keep the summary under ~80 characters so changelog entries stay readable.
- Do not delete processed files manually; `pnpm publish:version` removes them after the release commit is created.
